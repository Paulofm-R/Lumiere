(function(){"use strict";var t={1e3:function(t,a,e){var o=e(144),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("NavBar"),e("Footer")],1)},s=[],r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"navBar"}},[e("b-container",{attrs:{fluid:""}},[e("b-row",{attrs:{id:"nav"}},[e("b-col",{attrs:{cols:"4"}},[e("router-link",{staticClass:"nome",attrs:{to:"/"}},[t._v("Lumière")])],1),e("b-col",{staticClass:"links",attrs:{cols:"8"}},[e("router-link",{staticClass:"link",attrs:{to:{name:"filmes"}}},[t._v("Catálogo")]),e("router-link",{staticClass:"link",attrs:{to:{name:"jogos"}}},[t._v("Jogos")]),e("router-link",{staticClass:"link",attrs:{to:{name:"sobreNos"}}},[t._v("Sobre Nós ")]),null===t.getLoggedUser?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.loginModal",modifiers:{loginModal:!0}}],attrs:{id:"entrar"}},[t._v("ENTRAR")]):e("router-link",{staticClass:"link",attrs:{to:{name:"perfil"}}},[e("span",{attrs:{id:"nomeUtilizador"}},[t._v(t._s(t.loggedUtilizador.nome))]),e("img",{attrs:{src:t.loggedUtilizador.foto,id:"imgPerfil"}})]),null!==t.getLoggedUser?e("b-button",{attrs:{variant:"outline-light"},on:{click:function(a){return t.logout()}}},[e("b-icon",{attrs:{icon:"door-open"}})],1):t._e()],1),e("b-modal",{ref:"loginModal",attrs:{id:"loginModal",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light","no-stacking":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("h4",{staticClass:"modalTitulo"},[t._v("LOGIN")]),e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"modalFooter",attrs:{id:"login"},on:{click:function(a){return t.handleLogin()}}},[t._v("Login")])]},proxy:!0}])},[[e("div",{staticClass:"bodyModal"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"inputLogin"},[e("label",{attrs:{for:"username"}},[t._v("Username: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.utilizador.nome,expression:"utilizador.nome"}],attrs:{type:"text",id:"username"},domProps:{value:t.utilizador.nome},on:{input:function(a){a.target.composing||t.$set(t.utilizador,"nome",a.target.value)}}})]),e("div",{staticClass:"inputLogin"},[e("label",{attrs:{for:"password"}},[t._v("Password : ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.utilizador.palavra_passe,expression:"utilizador.palavra_passe"}],attrs:{type:"password",id:"password"},domProps:{value:t.utilizador.palavra_passe},on:{input:function(a){a.target.composing||t.$set(t.utilizador,"palavra_passe",a.target.value)}}})]),e("p",{attrs:{id:"txtRegisto"}},[t._v("Não tens conta?"),e("a",{directives:[{name:"b-modal",rawName:"v-b-modal.registarModal",modifiers:{registarModal:!0}}],staticStyle:{color:"#4BC3B5"}},[t._v("Regista-te!")])])]),t.message?e("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(" "+t._s(t.message)+" ")]):t._e(),t.errors.length?e("p",[e("b",[t._v("Por favor corrija os seguintes erros:")]),e("ul",t._l(t.errors,(function(a,o){return e("li",{key:o},[t._v(t._s(a))])})),0)]):t._e()])]],2),e("b-modal",{ref:"registarModal",attrs:{id:"registarModal",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("h4",{staticClass:"modalTitulo"},[t._v("REGISTAR")]),e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[e("b-button",{staticClass:"modalFooter",attrs:{id:"registar"},on:{click:function(a){return t.handleRegister()}}},[t._v("Registar")])]},proxy:!0}])},[[e("form",{on:{submit:function(a){return a.preventDefault(),t.regitar.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{id:"labelRegistro",cols:"6"}},[e("label",{staticClass:"labelRegistro",attrs:{for:"username"}},[t._v("Username: ")]),e("br"),e("label",{staticClass:"labelRegistro",attrs:{for:"password"}},[t._v("Password : ")]),e("br"),e("label",{staticClass:"labelRegistro",attrs:{for:"cPassword"}},[t._v("Confirmar Password: ")]),e("br"),e("label",{staticClass:"labelRegistro",attrs:{for:"dataNasc"}},[t._v("Data Nascimento: ")])]),e("b-col",{attrs:{id:"inputRegistro",cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.novoUtilizador.nome,expression:"novoUtilizador.nome"}],staticClass:"inputRegistro",attrs:{type:"text",id:"username",required:""},domProps:{value:t.novoUtilizador.nome},on:{input:function(a){a.target.composing||t.$set(t.novoUtilizador,"nome",a.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.novoUtilizador.palavra_passe,expression:"novoUtilizador.palavra_passe"}],staticClass:"inputRegistro",attrs:{type:"password",id:"password",required:""},domProps:{value:t.novoUtilizador.palavra_passe},on:{input:function(a){a.target.composing||t.$set(t.novoUtilizador,"palavra_passe",a.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cpalavra_passe,expression:"cpalavra_passe"}],staticClass:"inputRegistro",attrs:{type:"password",id:"cPassword",required:""},domProps:{value:t.cpalavra_passe},on:{input:function(a){a.target.composing||(t.cpalavra_passe=a.target.value)}}}),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.novoUtilizador.data_nascimento,expression:"novoUtilizador.data_nascimento"}],staticClass:"inputRegistro",attrs:{type:"date",id:"dataNasc",required:""},domProps:{value:t.novoUtilizador.data_nascimento},on:{input:function(a){a.target.composing||t.$set(t.novoUtilizador,"data_nascimento",a.target.value)}}})])],1)],1),t.message?e("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(" "+t._s(t.message)+" ")]):t._e(),t.errors.length?e("p",[e("b",[t._v("Por favor corrija os seguintes erros:")]),e("ul",t._l(t.errors,(function(a,o){return e("li",{key:o},[t._v(t._s(a))])})),0)]):t._e()]],2),e("router-view")],1)],1)],1)},n=[],l=e(629);class c{constructor(t,a){this.nome=t,this.palavra_passe=a}}class d{constructor(t,a,e){this.nome=t,this.palavra_passe=a,this.data_nascimento=e}}var m={name:"NavBar",data(){return{cpalavra_passe:"",utilizadores:localStorage.getItem("utilizadores")?JSON.parse(localStorage.getItem("utilizadores")):[],utilizador:new c("","",""),novoUtilizador:new d(null,null,null,null),message:null,successful:!1,errors:[],loggedUtilizador:null}},computed:{...(0,l.Se)(["getMessage","isUser","isUsernameAvailable","getLoggedUser","getLoggedIn","getUtilizador"])},methods:{async handleLogin(){if(this.errors=[],this.utilizador.nome&&this.utilizador.palavra_passe)try{await this.$store.dispatch("login",this.utilizador),this.$refs["loginModal"].hide(),this.getLoggedUserInfo()}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}else this.utilizador.nome||this.errors.push("É preciso um nome de utilizador"),this.utilizador.palavra_passe||this.errors.push("É preciso de uma palavra-passe")},async handleRegister(){if(this.message="",this.successful=!1,this.errors=[],this.novoUtilizador.nome&&this.novoUtilizador.palavra_passe&&this.novoUtilizador.data_nascimento)if(this.novoUtilizador.palavra_passe==this.cpalavra_passe)try{await this.$store.dispatch("register",this.novoUtilizador),this.message=this.getMessage,this.successful=!0,this.$refs["registarModal"].hide(),this.utilizador.nome=this.novoUtilizador.nome,this.utilizador.palavra_passe=this.novoUtilizador.palavra_passe,this.handleLogin()}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}else this.errors.push("A palavra passe não foi confirmada corretamente");else this.novoUtilizador.nome||this.errors.push("É preciso um nome de utilizador"),this.novoUtilizador.palavra_passe||this.errors.push("É preciso de uma palavra-passe"),this.novoUtilizador.data_nascimento||this.errors.push("É preciso de uma data de nascimento")},async getLoggedUserInfo(){try{let t=await this.getLoggedUser;await this.$store.dispatch("getUtilizador",t.id),this.loggedUtilizador=await this.getUtilizador}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}finally{this.loading=!1}},async logout(){await this.$store.dispatch("logout"),this.$router.push({name:"paginaInicial"})}},watch:{utilizadores:{deep:!0,handler(){localStorage.setItem("utilizadores",JSON.stringify(this.utilizadores))}}},mounted(){null!==this.getLoggedUser&&this.getLoggedUserInfo()}},u=m,g=e(1001),f=(0,g.Z)(u,r,n,!1,null,"4f7d4ca8",null),h=f.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"footer"}},[e("b-container",{attrs:{fluid:""}},[e("b-row",{attrs:{"align-h":"center"}},[e("b-col",{attrs:{id:"linhaFooter"}},[e("hr")])],1),e("b-row",{attrs:{"align-h":"between"}},[e("b-col",{staticClass:"links",attrs:{cols:"2"}},[e("router-link",{staticClass:"nome",attrs:{to:"/"}},[t._v("Lumière")]),e("br"),e("router-link",{staticClass:"link",attrs:{to:{name:"filmes"}}},[t._v("Catálogo")]),e("br"),e("router-link",{staticClass:"link",attrs:{to:{name:"jogos"}}},[t._v("Jogos")]),e("br"),e("router-link",{staticClass:"link",attrs:{to:{name:"sobreNos"}}},[t._v("Sobre Nós ")])],1),e("b-col",{attrs:{cols:"2",id:"redes"}},[e("b-icon",{staticClass:"icon",attrs:{icon:"facebook","font-scale":"2.55"}}),e("b-icon",{staticClass:"icon",attrs:{icon:"instagram","font-scale":"2.55"}}),e("b-icon",{staticClass:"icon",attrs:{icon:"twitter","font-scale":"2.55"}}),e("br"),e("span",[t._v("@2022")])],1)],1)],1)],1)},v=[],b={name:"ComponenteFooter"},_=b,y=(0,g.Z)(_,p,v,!1,null,"55dc4e14",null),S=y.exports,E={components:{NavBar:h,Footer:S}},w=E,C=(0,g.Z)(w,i,s,!1,null,null,null),z=C.exports,k=(e(1703),e(8345)),A=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("b-container",{attrs:{fluid:""}},[o("div",{attrs:{id:"txtEntrada"}},[o("b-col",{attrs:{cols:"12"}},[o("h1",[t._v("És amante da sétima arte?")]),o("p",{attrs:{id:"entrada"}},[t._v("Mostra-nos os teus conhecimentos ou conhece "),o("br"),t._v(" novos filmes e séries no catálogo, podes "),o("br"),t._v(" encontrar o que os nossos cinéfilos pensam sobre "),o("br"),t._v(" eles.")])])],1),o("div",{attrs:{id:"links"}},[o("b-row",{attrs:{align:"center center"}},[o("router-link",{staticClass:"link",attrs:{to:{name:"filmes"}}},[o("div",{attrs:{id:"catalogo"}})]),o("router-link",{staticClass:"link",attrs:{to:{name:"jogos"}}},[o("div",{attrs:{id:"jogos"}})]),o("router-link",{staticClass:"link",attrs:{to:{name:"sobreNos"}}},[o("div",{attrs:{id:"sobreNos"}})])],1)],1),o("div",{attrs:{id:"infoCatalogo"}},[o("h3",[t._v("CATÁLOGO")]),o("p",{attrs:{align:"left"}},[t._v("Conhece novos filmes e séries, e a opinião dos "),o("br"),t._v(" nossos utilizadores. Ou então, conta-nos a tua "),o("br"),t._v(" opinião sobre as mesma e dá a conhecer a tua "),o("br"),t._v(" opinião a todos.")]),o("img",{attrs:{src:e(829),id:"vetor1"}}),o("img",{attrs:{src:e(9136),id:"imgCatalogo"}})]),o("div",{attrs:{id:"infoJogos"}},[o("h3",{attrs:{align:"right"}},[t._v("JOGOS")]),o("p",{staticStyle:{"text-align":"right"}},[t._v("Encontra diversos jogos sobre os teus filmes e "),o("br"),t._v(" séries favoritas. Compete contra outros cinéfilos "),o("br"),t._v(" como tu e prova quem é o verdadeiro conhecedor "),o("br"),t._v(" da sétima arte. Entra para jogar!")]),o("img",{attrs:{src:e(829),id:"vetor2"}}),o("img",{attrs:{src:e(7940),id:"imgJogo"}})]),o("div",{attrs:{id:"infoSobreNos"}},[o("h3",[t._v("SOBRE NÓS")]),o("p",{attrs:{align:"left"}},[t._v("Descobre um pouco como começou este projeto e "),o("br"),t._v(" tudo sobre nós!")]),o("img",{attrs:{src:e(829),id:"vetor3"}}),o("img",{attrs:{src:e(5218),id:"imgSobreNos"}})])])],1)},T=[],U={name:"paginaInicial"},F=U,x=(0,g.Z)(F,A,T,!1,null,"5d03cf47",null),M=x.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-container",{attrs:{fluid:""}},[e("h1",[t._v("CATÁLOGO")]),e("b-row",{attrs:{"align-h":"center",id:"filtro"}},[e("b-col",{attrs:{cols:"3"}},[e("b-form-input",{attrs:{placeholder:"Pesquisa..."},model:{value:t.txtNomeFilme,callback:function(a){t.txtNomeFilme=a},expression:"txtNomeFilme"}})],1),e("b-col",{attrs:{cols:"2"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filtroCategoria,expression:"filtroCategoria"}],attrs:{name:"selectFiltro",id:"selectFiltro"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.filtroCategoria=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",selected:""}},[t._v("Todos")]),t._l(t.categoriasOrdenadasSelect,(function(a,o){return e("option",{key:o,domProps:{value:a.categoria}},[t._v(" "+t._s(a.categoria))])}))],2)])],1),t.loggedUtilizador&&"admin"==t.loggedUtilizador.tipo?e("b-row",{attrs:{id:"adicionar"}},[e("b-button",{attrs:{id:"botaoAdicionar"},on:{click:function(a){return t.$router.push({name:"adicionarFilme"})}}},[t._v("ADICIONAR")])],1):t._e(),e("b-row",{staticClass:"melhorAvaliados",attrs:{"align-h":"center"}},[e("h2",[t._v("Melhor Avaliados Filmes")]),t._l(t.melhorFilmesAvaliadosOrdenados,(function(a,o){return e("b-col",{key:o,staticClass:"catalogoMelhorAvaliados",attrs:{cols:"2"}},[e("div",{staticClass:"card",on:{click:function(e){return t.escolherFilme(a._id)}}},[e("img",{attrs:{src:a.imagem,alt:"Poster"}}),e("span",[t._v(t._s(a.nome))]),e("span",[t._v(t._s(a.avaliacao)+" "),e("b-icon",{attrs:{icon:"star-fill"}})],1)])])})),0==t.melhorFilmesAvaliadosOrdenados.length?e("p",[t._v("Não temos Filmes desta categoria")]):t._e()],2),e("b-row",{staticClass:"melhorAvaliados",attrs:{"align-h":"center"}},[e("h2",[t._v("Melhor Avaliados Series")]),t._l(t.melhorSeriesAvaliadosOrdenados,(function(a,o){return e("b-col",{key:o,staticClass:"catalogoMelhorAvaliados",attrs:{cols:"2"}},[e("div",{staticClass:"card",on:{click:function(e){return t.escolherFilme(a._id)}}},[e("img",{attrs:{src:a.imagem,alt:"Poster"}}),e("span",[t._v(t._s(a.nome))]),e("span",[t._v(t._s(a.avaliacao)+" "),e("b-icon",{attrs:{icon:"star-fill"}})],1)])])})),0==t.melhorSeriesAvaliadosOrdenados.length?e("p",[t._v("Não temos Series desta categoria")]):t._e()],2),e("div",t._l(t.categoriasOrdenadas,(function(a,o){return e("b-row",{key:o,staticClass:"filmesCategorias"},[t.filmesCatalogo(a.categoria).length>0?e("div",[e("h2",[t._v(t._s(a.categoria))]),e("div",{ref:"carousel",refInFor:!0,staticClass:"carouselFilmes"},t._l(t.filmesCatalogo(a.categoria),(function(a,o){return e("b-col",{key:o,staticClass:"filme card",attrs:{cols:"2"}},[e("b-img",{staticClass:"poster",attrs:{src:a.imagem,alt:"Poster"},on:{click:function(e){return t.escolherFilme(a._id)}}})],1)})),1),t.filmesCatalogo(a.categoria).length>5?e("b-button",{staticClass:"setas seta_esquerda",on:{click:function(a){return t.andarEsquerda(o)}}},[e("b-icon",{attrs:{icon:"arrow-left-square"}})],1):t._e(),t.filmesCatalogo(a.categoria).length>5?e("b-button",{staticClass:"setas seta_direita",on:{click:function(a){return t.andarDireita(o)}}},[e("b-icon",{attrs:{icon:"arrow-right-square"}})],1):t._e()],1):t._e()])})),1)],1)],1)},O=[],j=(e(6699),{name:"PaginaFilmes",data(){return{txtNomeFilme:"",filtroCategoria:"",message:"",filmes:[],categorias:[],loggedUtilizador:null}},computed:{...(0,l.Se)(["getFilmes","getCategoria","getLoggedUser","isNomeFilmeAvalido","isCategoriaAvailable","getUtilizador"]),melhorFilmesAvaliadosOrdenados(){const t=this.filmes.filter((t=>"Filme"==t.tipo&&(t.nome.includes(this.txtNomeFilme)||t.elenco.find((t=>t===this.txtNomeFilme)))&&(t.categoria.find((t=>t==this.filtroCategoria))||""==this.filtroCategoria))).slice(0).sort(this.compararAvaliacoes);let a=[];if(t.length>2)a.push(t[2]),a.push(t[0]),a.push(t[1]);else for(let e of t)a.push(e);return a},melhorSeriesAvaliadosOrdenados(){const t=this.filmes.filter((t=>"Serie"==t.tipo&&(t.nome.includes(this.txtNomeFilme)||t.elenco.find((t=>t===this.txtNomeFilme)))&&(t.categoria.find((t=>t==this.filtroCategoria))||""==this.filtroCategoria))).slice(0).sort(this.compararAvaliacoes);let a=[];if(t.length>2)a.push(t[2]),a.push(t[0]),a.push(t[1]);else for(let e of t)a.push(e);return a},categoriasOrdenadasSelect(){return this.categorias.slice(0).sort(this.ordenarAlfabeticaCategoria)},categoriasOrdenadas(){return this.categorias.filter((t=>t.categoria==this.filtroCategoria||""==this.filtroCategoria)).slice(0).sort(this.ordenarAlfabeticaCategoria)}},methods:{...(0,l.OI)(["SET_NOVO_FILME","SET_NOVA_CATEGORIA","SET_FILME"]),async getLoggedUserInfo(){try{let t=await this.getLoggedUser;await this.$store.dispatch("getUtilizador",t.id),this.loggedUtilizador=await this.getUtilizador}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}finally{this.loading=!1}},async getListaFilmes(){try{await this.$store.dispatch("getAllFilmes"),this.filmes=this.getFilmes}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async getListaCategorias(){try{await this.$store.dispatch("getAllCategorias"),this.categorias=this.getCategoria}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},escolherFilme(t){this.$router.push({name:"filme",params:{filmeID:t}})},compararAvaliacoes(t,a){return t.avaliacao<a.avaliacao?1:t.avaliacao>a.avaliacao?-1:0},ordenarAlfabeticaCategoria(t,a){return t.categoria<a.categoria?-1:t.categoria>a.categoria?1:0},ordenarAlfabeticaFilmes(t,a){return t.nome<a.nome?-1:t.nome>a.nome?1:0},filmesCatalogo(t){return this.filmes.filter((a=>a.categoria.find((a=>a==t))&&(a.nome.includes(this.txtNomeFilme)||a.elenco.find((t=>t===this.txtNomeFilme))))).sort(this.ordenarAlfabeticaFilmes)},andarEsquerda(t){this.$refs.carousel[t].scrollBy(-300,0)},andarDireita(t){console.log(t),this.$refs.carousel[t].scrollBy(300,0)}},mounted(){this.getListaFilmes(),this.getListaCategorias(),null!==this.getLoggedUser&&this.getLoggedUserInfo()}}),N=j,I=(0,g.Z)(N,$,O,!1,null,"6dbce0ba",null),L=I.exports,J=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-container",{attrs:{fluid:""}},[e("h2",[t._v(" "+t._s(t.filme.nome)+" "),t.getLoggedUser&&"admin"==t.getLoggedUser.role?e("b-button",{attrs:{id:"removerFilme"},on:{click:t.removerFilme}},[t._v(" Remover")]):t._e()],1),e("span",{attrs:{id:"classificacaoFilme"}},[t._v(t._s(t.filme.classificacao))]),e("div",{attrs:{id:"anexosFilme"}},[e("img",{attrs:{src:t.filme.imagem,id:"imgFilme"}}),e("iframe",{attrs:{width:"560",height:"315",src:t.filme.trailer,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",id:"trailer"}})]),e("b-col",{attrs:{cols:"6"}},[e("div",{attrs:{id:"filmeAvaliacaoFavoritos"}},[e("a",{attrs:{id:"rate"}},[e("span",[t._v(t._s(t.filme.avaliacao))]),e("b-icon",{attrs:{icon:"star-fill"}}),t._v("/5.0 ")],1),e("b-button",{attrs:{id:"avaliar",variant:"info"},on:{click:function(a){return t.avaliarModal()}}},[t._v("Avaliar")]),null!==t.getLoggedUser?e("b-button",{attrs:{variant:"info",id:"favoritos"},on:{click:function(a){return t.favoritos()}}},[t._v(" ♥ Adicionar aos favoritos")]):t._e(),null!==t.getLoggedUser?e("b-button",{attrs:{variant:"info",id:"lista"},on:{click:function(a){return t.lista()}}},[t._v("+ A minha lista ")]):t._e()],1),e("div",{staticClass:"infoFilme"},[e("p",[e("span",[t._v("Sinopse: ")]),t._v(t._s(t.filme.sinopse))]),e("p",[e("span",[t._v("Ano: ")]),t._v(t._s(t.filme.ano))]),e("p",[e("span",[t._v("Realizador: ")]),e("a",{staticClass:"infoFilme"},[t._v(t._s(t.realizador))])]),e("p",[e("span",[t._v("Produtora: ")]),e("a",{staticClass:"infoFilme"},[t._v(t._s(t.filme.produtora))])]),e("p",[e("span",[t._v("Elenco: ")]),e("a",{staticClass:"infoFilme"},[t._v(t._s(t.elenco)+" ")])]),e("p",[e("span",[t._v("Género: ")]),e("a",[t._v(t._s(t.categoria)+" ")])])])]),e("b-row",[e("div",{attrs:{id:"zonaComentarios"}},[e("hr"),e("h3",[t._v("Comentários")]),t.comentarios.length>0?e("div",[t._l(t.comentarios,(function(a,o){return e("b-row",{key:o,staticClass:"comentario"},[e("b-col",{staticClass:"imagemSpoiler",attrs:{cols:"1"}},[e("img",{staticClass:"imagemUtilizador",attrs:{src:t.utilizadoresFoto[o]}}),null!==t.getLoggedUser?e("input",{staticClass:"botaoSpoiler",attrs:{type:"image",src:"./image/spoiler.svg"},on:{click:function(e){return t.spoiler(a)}}}):t._e()]),e("b-col",{staticClass:"coment"},[e("p",{attrs:{id:"username"}},[t._v(t._s(t.utilizadoresNome[o]))]),1==a.spoiler?e("b-button",{staticClass:"esconderSpoiler",on:{click:function(t){a.spoiler=!1}}},[t._v("VER SPOILER")]):t._e(),e("p",{attrs:{id:"comentarioUser"}},[t._v(t._s(a.comentario))])],1)],1)})),e("div",{attrs:{id:"comentarioUserFundo"}})],2):e("p",{attrs:{id:"semComentarios"}},[t._v("Ainda não tem comentarios. Seja o primeiro a comentar!")])])]),e("b-modal",{ref:"avaliarModal",attrs:{id:"avaliarModal",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("h4",{staticClass:"modalTitulo"},[t._v("AVALIAR")]),e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{id:"avaliar"},on:{click:function(a){return t.avaliar()}}},[t._v("Avaliar")])]},proxy:!0}])},[[e("form",{on:{submit:function(a){return a.preventDefault(),t.avaliar.apply(null,arguments)}}},[e("div",[e("b-form-rating",{model:{value:t.avaliacao,callback:function(a){t.avaliacao=a},expression:"avaliacao"}})],1),e("div",[e("p",[t._v("Comentário:")]),e("b-form-textarea",{attrs:{id:"textarea",placeholder:"Seu comentario",rows:"5"},model:{value:t.comentario,callback:function(a){t.comentario=a},expression:"comentario"}})],1)])]],2),e("b-modal",{ref:"adicionadoSucesso",attrs:{id:"adicionadoSucesso","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("h4",{staticClass:"modalTitulo"},[t._v("Adicionado com sucesso")]),e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])]}},{key:"modal-footer",fn:function(a){var o=a.close;return[e("b-button",{on:{click:function(t){return o()}}},[t._v("Fechar")])]}}])},[[e("p",[t._v("O filme foi adicionado com sucesso a sua lista")])]],2)],1)],1)},D=[],P={name:"PaginaFilme",data(){return{filme:null,avaliacao:"",comentario:"",loggedUtilizador:null,utilizadoresFoto:[],utilizadoresNome:[]}},computed:{...(0,l.Se)(["getFilmes","getFilme","getLoggedUser","getUtilizadores","getUtilizador","isFilmeFavoritoValido","isFilmeListaValido"]),elenco(){return this.filme.elenco.join(", ")},categoria(){return this.filme.categoria.join(", ")},realizador(){return this.filme.realizador.join(", ")},comentarios(){for(const t of this.filme.comentarios)this.utilizadoresComentarios(t.utilizador);return this.filme.comentarios}},methods:{...(0,l.OI)(["SET_NOVO_COMENTARIO","SET_NOVA_AVALIACAO","SET_NOVO_FAVORITO","SET_NOVA_LISTA","SET_SPOILER","SET_REMOVER_FILME"]),async getFilmeInfo(){try{await this.$store.dispatch("getFilme",this.$route.params.filmeID),this.filme=await this.getFilme.filme}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async avaliar(){if(this.avaliacao>0&&(await this.$store.dispatch("updateAvaliacao",[this.filme._id,this.avaliacao]),this.getFilmeInfo()),this.comentario.length>0){let t={utilizador:this.loggedUtilizador._id,comentario:this.comentario};await this.$store.dispatch("addComentario",[this.filme._id,t]),this.getFilmeInfo()}this.$refs["avaliarModal"].hide()},async getLoggedUserInfo(){try{let t=await this.getLoggedUser;await this.$store.dispatch("getUtilizador",t.id),this.loggedUtilizador=await this.getUtilizador}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async spoiler(t){try{t.spoiler=0==t.spoiler,await this.$store.dispatch("updateComentario",[this.filme._id,t.id,t.spoiler])}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}},async removerFilme(){if(confirm("Tens acerteza que queres remover este filme?"))try{await this.$store.dispatch("eliminarFilme",this.filme._id),this.$router.push({name:"filmes"})}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},avaliarModal(){""!=this.getLoggedUser?this.$refs["avaliarModal"].show():alert("É preciso autenticar primeiro!")},async favoritos(){this.isFilmeFavoritoValido(this.filme.nome)&&(await this.$store.dispatch("addFavoritos",[this.loggedUtilizador._id,this.filme._id]),this.$refs["adicionadoSucesso"].show())},async lista(){this.isFilmeListaValido(this.filme.nome)&&(await this.$store.dispatch("addLista",[this.loggedUtilizador._id,this.filme._id]),this.$refs["adicionadoSucesso"].show())},async utilizadoresComentarios(t){try{await this.$store.dispatch("getUtilizador",t);let a=await this.getUtilizador;this.utilizadoresFoto.push(a.foto),this.utilizadoresNome.push(a.nome)}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}}},mounted(){this.getFilmeInfo(),this.getLoggedUserInfo()}},G=P,q=(0,g.Z)(G,J,D,!1,null,"0c478f10",null),R=q.exports,B=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"fundo"}},[e("b-container",{attrs:{fluid:""}},[e("h1",[t._v("JOGOS")]),e("b-row",{attrs:{"align-h":"between"}},[e("b-col",{attrs:{cols:"4",id:"filtro"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filtroTipo,expression:"filtroTipo"}],attrs:{name:"filtroJogos",id:"filtroJogos"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.filtroTipo=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",default:"",disabled:""}},[t._v("Filtrar por...")]),e("option",{attrs:{value:""}},[t._v("TODOS")]),t._l(t.getTipoJogo,(function(a,o){return e("option",{key:o,domProps:{value:a}},[t._v(t._s(a))])}))],2)]),"admin"==t.getLoggedUser.role?e("b-col",{attrs:{cols:"4",id:"adminAcoes"}},[t.acaoAdmin?e("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"adicionarJogoModal",expression:"'adicionarJogoModal'"}]},[t._v("Adicionar")]):e("button",{on:{click:function(a){t.acaoAdmin=!0}}},[t._v("Editar")])]):t._e()],1),e("b-row",{attrs:{id:"catalogoJogos"}},t._l(t.filtroTipoJogo,(function(a,o){return e("b-col",{key:o,staticClass:"catalogoJogo",attrs:{cols:"3"}},[e("div",{staticClass:"card jogo",on:{click:function(e){return t.selecionarJogo(a._id)}}},[t.acaoAdmin?e("b-button",{staticClass:"remover",class:a.nome,on:{click:function(e){return e.stopPropagation(),t.removerJogo(a._id)}}},[t._v("X ")]):t._e(),e("b-icon",{staticClass:"classificacao",class:a.nome,attrs:{icon:"info-circle-fill",scale:"1.5",variant:"info"},on:{click:function(e){return e.stopPropagation(),t.classificacao(a._id)}}}),e("img",{attrs:{src:a.img}}),e("div",{staticClass:"nomeJogo"},[e("h4",[t._v(t._s(a.nome))])])],1)])})),1),e("b-modal",{ref:"adicionarJogoModal",attrs:{id:"adicionarJogoModal",centered:"","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("b-col",{staticClass:"modalTitulo",attrs:{cols:"11"}},[e("h4",[t._v("Adicionar Jogo")])]),e("b-col",[e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])],1)]}},{key:"modal-footer",fn:function(){return[e("div",{attrs:{id:"botaoAdicionar"}},[e("b-button",{attrs:{variant:"primary"},on:{click:function(a){return t.adicionaJogo()}}},[t._v("ADICIONAR")])],1)]},proxy:!0}])},[[e("b-row",[e("b-col",{attrs:{cols:"4"}},[t.imagemFilme?e("input",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"fotoModal",expression:"'fotoModal'"}],attrs:{type:"image",src:t.form.imagem,alt:"Foto do Jogo",width:"100%"}}):e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"fotoModal",expression:"'fotoModal'"}],attrs:{variant:"outline-secondary",id:"novoFoto"}},[t._v("Foto Jogo "),e("br"),t._v("+")])],1),e("b-col",{attrs:{cols:"8"}},[e("b-form",{on:{submit:function(a){return a.preventDefault(),t.adicionaJogo.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"txtNome"}},[t._v("Nome")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.nome,expression:"form.nome"}],staticClass:"form-control",attrs:{type:"text",name:"txtNome",id:"txtNome",placeholder:"Nome do Jogo",required:""},domProps:{value:t.form.nome},on:{input:function(a){a.target.composing||t.$set(t.form,"nome",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"selectTipoJogo"}},[t._v("Tipo de Jogo")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.tipo,expression:"form.tipo"}],staticClass:"form-control",attrs:{name:"selectTipoJogo",id:"selectTipoJogo",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"tipo",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("--Selecione o tipo de jogo--")]),t._l(t.getTipoJogo,(function(a,o){return e("option",{key:o,domProps:{value:a}},[t._v(t._s(a)+" ")])}))],2)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"txtNome"}},[t._v("Questões")]),e("input",{staticClass:"form-control",attrs:{type:"button",name:"numQuestao",id:"numQuestao",value:"Inserir as questoes"},on:{click:t.questoesJogo}})])])],1),t.message?e("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(" "+t._s(t.message)+" ")]):t._e(),t.errors.length?e("p",[e("b",[t._v("Por favor corrija os seguintes erros:")]),e("ul",t._l(t.errors,(function(a,o){return e("li",{key:o},[t._v(t._s(a))])})),0)]):t._e()],1),e("b-row",{staticClass:"justify-content-md-center",attrs:{id:"rowJogoExiste"}},[e("b-col",{attrs:{cols:"5"}},[t.jogoExiste?e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("Esse jogo já existe")]):t._e()],1)],1)]],2),e("b-modal",{ref:"fotoModal",attrs:{id:"fotoModal",centered:"","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("b-col",{staticClass:"modalTitulo",attrs:{cols:"11"}},[e("h4",[t._v("Foto do jogo")])]),e("b-col",{staticStyle:{"text-align":"right"}},[e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])],1)]}},{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:t.addImagem}},[t._v("Guardar")])]},proxy:!0}])},[[e("label",{attrs:{for:"urlFotoJogo"}},[t._v("URL da imagem")]),e("b-form-input",{attrs:{id:"urlFotoJogo",type:"url"},model:{value:t.form.imagem,callback:function(a){t.$set(t.form,"imagem",a)},expression:"form.imagem"}})]],2),e("b-modal",{ref:"questoesJogo",attrs:{id:"questoesJogo",centered:"","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light",scrollable:"","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("b-col",{staticClass:"modalTitulo",attrs:{cols:"11"}},[e("h4",[t._v("Questões")])]),e("b-col",{staticStyle:{"text-align":"right"}},[e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])],1)]}},{key:"modal-footer",fn:function(a){var o=a.close;return[e("b-button",{attrs:{variant:"primary"},on:{click:function(a){return t.addQuestao()}}},[t._v("+")]),e("b-button",{attrs:{variant:"primary"},on:{click:o}},[t._v("Guardar")])]}}])},[["Quizz"==t.form.tipo?e("b-form",{staticClass:"quizz"},t._l(t.form.questoes,(function(a,o){return e("div",{key:o,staticClass:"mb-3"},[e("b-form-group",{attrs:{label:o+1+"ª Pergunta:","label-for":"pergunta"}},[e("b-form-input",{staticClass:"pergunta",attrs:{placeholder:"Pergunta",required:""},model:{value:a.pergunta,callback:function(e){t.$set(a,"pergunta",e)},expression:"questao.pergunta"}})],1),e("b-row",{staticClass:"mt-2",attrs:{"align-h":"between"}},t._l(a.alternativas,(function(i,s){return e("b-col",{key:s,staticClass:"alternativas",attrs:{cols:"6"}},[e("b-form-group",{staticClass:"alternativa",attrs:{label:"Alternativa "+(s+1)+":","label-for":""+s},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.ariaDescribedby;return[e("b-form-radio",{staticClass:"radionAlternativas",attrs:{name:"respostaPergunta"+o,"aria-describedby":r,value:a.alternativas[s]},model:{value:a.resposta,callback:function(e){t.$set(a,"resposta",e)},expression:"questao.resposta"}}),e("b-form-input",{attrs:{id:""+s,placeholder:"Alternativa "+(s+1),required:""},model:{value:a.alternativas[s],callback:function(e){t.$set(a.alternativas,s,e)},expression:"questao.alternativas[index2]"}})]}}],null,!0)})],1)})),1),o+1<t.form.questoes.length?e("hr"):t._e()],1)})),0):"Preencher"==t.form.tipo?e("b-form",{staticClass:"preencher"},t._l(t.form.questoes,(function(a,o){return e("div",{key:o,staticClass:"mb-3"},[e("b-form-group",{attrs:{label:o+1+"ª Pergunta:","label-for":"pergunta"}},[e("b-form-input",{staticClass:"pergunta",attrs:{placeholder:"Pergunta",required:""},model:{value:a.pergunta,callback:function(e){t.$set(a,"pergunta",e)},expression:"questao.pergunta"}})],1),e("b-row",[e("b-col",[e("b-form-group",{attrs:{label:"Anexo:","label-for":"anexo"}},[e("b-form-input",{staticClass:"anexo",attrs:{placeholder:"Anexo",type:"url",required:""},model:{value:a.anexo,callback:function(e){t.$set(a,"anexo",e)},expression:"questao.anexo"}})],1)],1),e("b-col",[e("select",{directives:[{name:"model",rawName:"v-model",value:a.tipoAnexo,expression:"questao.tipoAnexo"}],staticClass:"tipoAnexo",attrs:{name:"tipoAnexo",required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"tipoAnexo",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"",disabled:""}},[t._v("--Selecione um Tipo--")]),e("option",{attrs:{value:"Imagem"}},[t._v("Imagem")]),e("option",{attrs:{value:"Video"}},[t._v("Video")])])])],1),e("b-form-group",{attrs:{label:"Resposta:","label-for":"pergunta"}},[e("b-form-input",{staticClass:"resposta",attrs:{placeholder:"Resposta",required:""},model:{value:a.resposta,callback:function(e){t.$set(a,"resposta",e)},expression:"questao.resposta"}})],1),o+1<t.form.questoes.length?e("hr"):t._e()],1)})),0):"Lista"==t.form.tipo?e("b-form",{staticClass:"lista"},[e("h3",{staticStyle:{"text-align":"center"}},[t._v("EM MANUTENÇÃO"),e("br"),t._v("(BREVEMENTE DISPONIVEL)")])]):e("h5",[t._v("SELECIONE UM TIPO DE QUESTÃO PRIMEIRO!")])]],2)],1)],1)},V=[],Z={name:"PaginaJogos",data(){return{acaoAdmin:!1,jogoExiste:!1,form:{nome:"",imagem:"",tipo:"",questoes:[]},imagemFilme:!1,filtroTipo:"",jogos:null,message:null,successful:!1,errors:[]}},computed:{...(0,l.Se)(["getJogos","getJogo","getTipoJogo","isNomeJogoAvalido","getLoggedUser"]),filtroTipoJogo(){return this.getJogos.filter((t=>t.tipo==this.filtroTipo||""==this.filtroTipo))}},methods:{async getListaJogos(){try{await this.$store.dispatch("getAllJogos"),this.jogos=this.getJogos}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async adicionaJogo(){this.errors=[];let t=!0;for(let e in this.form)if(0===this.form[e].length){t=!1;break}if(t)if(this.isNomeJogoAvalido(this.form.nome)){if("Preencher"==this.form.tipo)for(let a=0;a<this.form.questoes.length;a++)"Video"==this.form.questoes[a].tipoAnexo&&(this.form.questoes[a].anexo=this.form.questoes[a].anexo.replace("watch?v=","embed/"));let t={nome:this.form.nome,img:this.form.imagem,tipo:this.form.tipo,perguntas:this.form.questoes,classificacao:[]};try{await this.$store.dispatch("novoJogo",t),this.$router.push({name:"jogo",params:{jogoID:this.getJogo}}),this.getListaJogos()}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}}else this.errors.push("Já tem um jogo com esse nome")},async removerJogo(t){if(confirm("Tens acerteza que queres remover este jogo?"))try{await this.$store.dispatch("eliminarJogo",t),this.getListaJogos()}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}},classificacao(t){this.$router.push({name:"classificacao",params:{jogoID:t}})},selecionarJogo(t){this.$router.push({name:"jogo",params:{jogoID:t}})},addImagem(){this.form.imagem.length>0&&(this.imagemFilme=!0,this.$refs["fotoModal"].hide())},questoesJogo(){0===this.form.questoes.length&&this.addQuestao(),this.$refs["questoesJogo"].show()},addQuestao(){"Quizz"==this.form.tipo?this.form.questoes.push({pergunta:"",alternativas:["","","",""],resposta:""}):"Preencher"==this.form.tipo&&this.form.questoes.push({pergunta:"",anexo:"",tipoAnexo:"",resposta:""})}},mounted(){this.getListaJogos()}},Q=Z,Y=(0,g.Z)(Q,B,V,!1,null,"7d33f020",null),H=Y.exports,X=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-container",[e("h1",[t._v(t._s(t.jogo.nome))]),"Quizz"==t.jogo.tipo?e("div",t._l(t.jogo.perguntas,(function(a,o){return e("div",{key:o,staticClass:"jogo quizz"},[e("b-row",{attrs:{"align-h":"center"}},[e("b-col",{staticClass:"pergunta",attrs:{cols:"10"}},[e("p",[t._v(t._s(a.pergunta))])])],1),e("b-row",{attrs:{"align-h":"around"}},t._l(a.alternativas,(function(a,i){return e("b-col",{key:i,staticClass:"alternativas",attrs:{cols:"4"}},[e("b-button",{staticClass:"botao botaoJogo",class:t.respostasUtilizador[o]==a?"selecionada":"naoSelecionada",attrs:{variant:"outline-dark"},on:{click:function(e){return t.selecionar(a,o)}}},[t._v(t._s(a))])],1)})),1)],1)})),0):t._e(),"Preencher"==t.jogo.tipo?e("div",{attrs:{id:"preencher"}},t._l(t.jogo.perguntas,(function(a,o){return e("div",{key:o,staticClass:"jogo"},[e("h2",[t._v(t._s(a.pergunta))]),e("div",["Imagem"==a.tipoAnexo?e("img",{staticClass:"anexoJogo",attrs:{src:a.anexo,height:"350"}}):e("iframe",{staticClass:"anexoJogo",attrs:{width:"560",height:"315",src:a.anexo,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),e("div",[e("b-form-input",{staticClass:"respostas",attrs:{placeholder:"Sua resposta",required:""},model:{value:t.respostasUtilizador[o],callback:function(a){t.$set(t.respostasUtilizador,o,a)},expression:"respostasUtilizador[index]"}})],1)])})),0):t._e(),"Lista"==t.jogo.tipo?e("div",[e("div",{staticClass:"jogo"},[e("h2",[t._v(t._s(t.jogo.perguntas[0].pergunta))]),e("div",["Imagem"==t.jogo.perguntas[0].tipoAnexo?e("img",{staticClass:"anexoJogo",attrs:{src:t.jogo.perguntas[0].anexo,height:"350"}}):e("iframe",{staticClass:"anexoJogo",attrs:{width:"560",height:"315",src:t.jogo.perguntas[0].anexo,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),e("div",[e("b-form-input",{staticClass:"respostas",attrs:{placeholder:"Sua resposta"},on:{change:function(a){return t.verificarRespostaLista()}},model:{value:t.respostasUtilizadorLista,callback:function(a){t.respostasUtilizadorLista=a},expression:"respostasUtilizadorLista"}})],1),e("div",[e("b-row",{attrs:{"align-h":"center",id:"jogoListaTabela"}},t._l(t.jogo.perguntas[0].resposta,(function(a,o){return e("b-col",{key:o,staticClass:"respostaLista",attrs:{cols:"5"}},[a==t.respostasUtilizador[o]?e("span",[t._v(t._s(a))]):t._e()])})),1)],1)])]):t._e(),e("b-row",[e("b-button",{staticClass:"botao",attrs:{id:"terminarQuizz"},on:{click:function(a){return t.terminar(t.jogo._id)}}},[t._v("TERMINAR QUIZZ")])],1)],1)],1)},W=[],K={name:"PaginaJogo",data(){return{jogo:null,respostasUtilizador:[],respostasUtilizadorLista:"",certas:0,loggedUtilizador:null}},computed:{...(0,l.Se)(["getLoggedUser","getJogos","getJogo","getDesafios","getUtilizador"])},methods:{...(0,l.OI)(["SET_NOVA_CLASSIFICACAO","SET_DESAFIO"]),async getJogoInfo(){try{await this.$store.dispatch("getJogo",this.$route.params.jogoID),this.jogo=await this.getJogo.jogo}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async terminar(t){let a=0;if("Lista"!=this.jogo.tipo)for(let s=0;s<this.jogo.perguntas.length;s++)this.jogo.perguntas[s].resposta==this.respostasUtilizador[s]&&this.certas++,a++;else for(let s=0;s<this.jogo.perguntas[0].resposta.length;s++)this.jogo.perguntas[0].resposta[s]==this.respostasUtilizador[s]&&this.certas++,a++;const e=25*this.certas,o={utilizadorID:this.getLoggedUser.id,pontuacao:e};try{await this.$store.dispatch("addClassificacao",[this.jogo._id,o]),await this.$store.dispatch("addDesafio",[this.getLoggedUser.id,this.jogo._id]),await this.$store.dispatch("getAllDesafios"),await this.$store.dispatch("addDesafioConcluido",[this.loggedUtilizador,this.getDesafios]),this.$router.push({name:"classificacao",params:{jogoID:t,certas:this.certas,numPerguntas:a}})}catch(i){this.message=i.response&&i.response.data||i.message||i.toString()}},async getLoggedUserInfo(){try{let t=await this.getLoggedUser;await this.$store.dispatch("getUtilizador",t.id),this.loggedUtilizador=await this.getUtilizador}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},selecionar(t,a){this.respostasUtilizador[a]=t,this.$forceUpdate()},verificarRespostaLista(){for(let t=0;t<this.jogo.perguntas[0].resposta.length;t++)this.jogo.perguntas[0].resposta[t]==this.respostasUtilizadorLista&&(this.respostasUtilizador[t]=this.respostasUtilizadorLista,this.$forceUpdate())}},mounted(){this.getJogoInfo(),this.getLoggedUserInfo()}},tt=K,at=(0,g.Z)(tt,X,W,!1,null,"1df2e926",null),et=at.exports,ot=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[e("h1",[t._v(t._s(t.jogo.nome))]),t.numPerguntas>0?e("h2",[t._v(t._s(t.certas)+" respostas certas em "+t._s(t.numPerguntas)+" ")]):t._e(),e("h3",[t._v("Tabela de Classificação")]),t.classificacao.length>0?e("table",[t._m(0),e("tbody",t._l(t.classificacao,(function(a,o){return e("tr",{key:o},[e("td",{staticClass:"posicao"},[t._v(t._s(o+1))]),e("td",{staticClass:"nome"},[e("img",{staticClass:"img",attrs:{src:t.utilizadoresFoto[o]}}),t._v(" "+t._s(t.utilizadoresNome[o]))]),e("td",{staticClass:"pontuacao"},[t._v(t._s(a.pontuacao)+"pts")])])})),0)]):e("div",{attrs:{id:"tabelaSemClassificacao"}},[e("p",[t._v("Ainda não tem nenhuma classificação")]),e("p",[t._v("Seja o primeiro a jogar e ter a sua classificacao aqui")]),e("b-button",{attrs:{id:"botaoJogar"},on:{click:function(a){return t.jogar()}}},[t._v("Jogar")])],1)])},it=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("POSIÇÃO")]),e("th",{staticClass:"nome"},[t._v("NOME")]),e("th",[t._v("PONTUAÇÃO")])])])}],st={name:"ClassificacaoJogo",data(){return{jogo:{},certas:0,utilizadoresFoto:[],utilizadoresNome:[],message:""}},created(){this.jogo=this.getJogos.find((t=>t.nome==this.$route.params.jogoNome)),this.certas=this.$route.params.certas,this.numPerguntas=this.$route.params.numPerguntas},computed:{...(0,l.Se)(["getUtilizador","getJogos","getJogo"]),classificacao(){let t=this.jogo.classificacao.slice(0).sort(this.ordenarClassificacao);for(const a of t.slice(0,5))this.utilizadoresClassificacao(a.utilizador);return t.slice(0,5)}},methods:{...(0,l.OI)(["SET_JOGO_ATUAL"]),async getJogoClassificacao(){try{await this.$store.dispatch("getClassificacao",this.$route.params.jogoID),this.jogo=await this.getJogo}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},ordenarClassificacao(t,a){return t.pontuacao<a.pontuacao?1:t.pontuacao>a.pontuacao?-1:0},async utilizadoresClassificacao(t){try{await this.$store.dispatch("getUtilizador",t);let a=await this.getUtilizador;this.utilizadoresFoto.push(a.foto),this.utilizadoresNome.push(a.nome)}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}},jogar(){this.$router.push({name:"jogo",params:{jogoID:this.jogo._id}})}},mounted(){this.getJogoClassificacao()}},rt=st,nt=(0,g.Z)(rt,ot,it,!1,null,"3cab63a6",null),lt=nt.exports,ct=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",[o("b-row",{staticClass:"imagemUtilizador"},[o("img",{attrs:{src:t.loggedUtilizador.foto,id:"imgPerfil"}}),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editarPerfilModal",modifiers:{editarPerfilModal:!0}}],attrs:{variant:"warning",id:"editarPerfil"}},[o("b-icon",{attrs:{icon:"pencil-square"}})],1)],1),o("b-row",[o("b-col",{attrs:{id:"utilizador",cols:"4"}},[o("span",{attrs:{id:"nomeUtilizador"}},[t._v(t._s(t.loggedUtilizador.nome))])])],1),o("b-row",[o("div",{attrs:{id:"listasUtilizador"}},[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.listaFavoritos",modifiers:{listaFavoritos:!0}}],staticClass:"botoes",attrs:{variant:"info"}},[o("b-icon",{attrs:{icon:"heart-fill"}}),t._v(" Favoritos ")],1),o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.listaMeusFilmes",modifiers:{listaMeusFilmes:!0}}],staticClass:"botoes",attrs:{variant:"info"}},[o("b-icon",{attrs:{icon:"play-fill"}}),t._v(" A minha lista ")],1),"admin"==t.loggedUtilizador.tipo?o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.utilizadoresModal",modifiers:{utilizadoresModal:!0}}],staticClass:"botoes",attrs:{variant:"info"}},[o("b-icon",{attrs:{icon:"person-fill"}}),t._v(" Utilizadores ")],1):t._e()],1)]),o("b-row",[o("b-col",{attrs:{cols:"8"}},[o("span",{attrs:{id:"desafios"}},[t._v("Desafios")]),o("img",{attrs:{src:e(829),id:"vetor1"}}),o("span",{attrs:{id:"badges"}},[t._v("Badges")]),o("img",{attrs:{src:e(829),id:"vetor2"}})])],1),o("b-row",{attrs:{"align-h":"around"}},[o("b-col",{attrs:{cols:"6"}},[o("div",{attrs:{id:"divDesafios"}},["admin"==t.loggedUtilizador.tipo?o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.adicionarDesafio",modifiers:{adicionarDesafio:!0}}],attrs:{id:"adicionarDesafio"}},[t._v(" ADICIONAR")]):t._e(),t._l(t.desafios,(function(a,e){return o("div",{key:e,staticClass:"desafio"},[o("span",[t._v(t._s(a.nome))]),o("b-progress",{attrs:{value:t.progressoDesafio,max:a.nEtapas,"show-value":"",animated:""}})],1)}))],2)]),o("b-col",{attrs:{cols:"6"}},[o("div",{attrs:{id:"divBadges"}},t._l(t.badges,(function(a,e){return o("div",{key:e,staticClass:"badge"},[o("div",[o("img",{attrs:{src:a.imagem,alt:"",width:"35px"}})]),o("span",[t._v(t._s(a.nome))])])})),0)])],1),o("b-modal",{ref:"editarPerfilModal",attrs:{id:"editarPerfilModal",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var e=a.close;return[o("h4",{staticClass:"modalTitulo"},[t._v("Editar Perfil")]),o("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:e}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[o("b-button",{on:{click:t.editarPerfil}},[t._v("Aceitar Alterações")])]},proxy:!0}])},[[o("div",{staticClass:"bodyModal"},[o("form",{on:{submit:function(a){return a.preventDefault(),t.editarPerfil.apply(null,arguments)}}},[o("div",[o("div",{staticClass:"inputsEditarPerfil"},[o("label",{attrs:{for:"urlFotoJogo"}},[t._v("Nova Foto : ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.imagemNova,expression:"form.imagemNova"}],attrs:{type:"url",width:"40vw",height:"30vh"},domProps:{value:t.form.imagemNova},on:{input:function(a){a.target.composing||t.$set(t.form,"imagemNova",a.target.value)}}})]),o("div",{staticClass:"inputsEditarPerfil"},[o("label",{attrs:{for:"novaPalavraPasse"}},[t._v("Nova Palavra Passe : ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.novaPalavraPasse,expression:"form.novaPalavraPasse"}],attrs:{type:"password",id:"novaPalavraPasse"},domProps:{value:t.form.novaPalavraPasse},on:{input:function(a){a.target.composing||t.$set(t.form,"novaPalavraPasse",a.target.value)}}})])])])])]],2),o("b-modal",{attrs:{id:"listaFavoritos",centered:"",size:"lg","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light",scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var e=a.close;return[o("h4",{staticClass:"modalTitulo"},[t._v("Favoritos")]),o("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:e}},[t._v("x")])]}},{key:"modal-footer",fn:function(a){var e=a.close;return[o("b-button",{on:{click:function(t){return e()}}},[t._v("Fechar")])]}}])},[[t.loggedUtilizador.favoritos.length>0?o("div",t._l(t.loggedUtilizador.favoritos,(function(a,e){return o("img",{key:e,staticClass:"imagemLista",attrs:{src:t.filmeImagem(a),alt:"",width:"150"},on:{click:function(e){return t.escolherFilme(a)}}})})),0):o("div",{staticClass:"textoModal"},[o("p",[t._v("Ainda não tens nenhum filme na tua lista de favoritos")]),o("p",[t._v("Vai ao "),o("router-link",{staticClass:"link",attrs:{to:{name:"filmes"}}},[t._v("Catálolo")]),t._v(" e adiciona o teu primeiro filme!")],1)])]],2),o("b-modal",{attrs:{id:"listaMeusFilmes",centered:"",size:"lg","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light",scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var e=a.close;return[o("h4",{staticClass:"modalTitulo"},[t._v("Meus Filmes")]),o("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:e}},[t._v("x")])]}},{key:"modal-footer",fn:function(a){var e=a.close;return[o("b-button",{on:{click:function(t){return e()}}},[t._v("Fechar")])]}}])},[[t.loggedUtilizador.lista.length>0?o("div",t._l(t.loggedUtilizador.lista,(function(a,e){return o("img",{key:e,staticClass:"imagemLista",attrs:{src:t.filmeImagem(a),alt:"",width:"150"},on:{click:function(e){return t.escolherFilme(a)}}})})),0):o("div",{staticClass:"textoModal"},[o("p",[t._v("Ainda não tens nenhum filme na tua lista de filmes")]),o("p",[t._v("Vai ao "),o("router-link",{staticClass:"link",attrs:{to:{name:"filmes"}}},[t._v("Catálolo")]),t._v(" e adiciona o teu primeiro filme!")],1)])]],2),o("b-modal",{attrs:{id:"utilizadoresModal",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light",scrollable:""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var e=a.close;return[o("h4",{staticClass:"modalTitulo"},[t._v("Utilizadores")]),o("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:e}},[t._v("x")])]}},{key:"modal-footer",fn:function(a){var e=a.close;return[o("b-button",{on:{click:function(t){return e()}}},[t._v("Fechar")])]}}])},[[o("b-col",{attrs:{id:"inputGerirUtilizador",cols:"5"}},[o("b-form-input",{attrs:{placeholder:"Nome de utilizador"},model:{value:t.nomeUtilizador,callback:function(a){t.nomeUtilizador=a},expression:"nomeUtilizador"}})],1),t._l(t.utilizadores,(function(a,e){return o("div",{key:e},[a.nome!=t.loggedUtilizador.nome?o("b-row",{staticClass:"utilizadores"},[o("b-col",{staticClass:"nomeUtilizadores"},[t._v(t._s(a.nome))]),o("b-col",[o("b-button",{staticClass:"botaoEditarUtilizador tipoUtilizadores",on:{click:function(e){return t.mudarTipo(a._id)}}},[t._v(" "+t._s(a.tipo))])],1),o("b-col",[o("b-button",{staticClass:"botaoEditarUtilizador removerUtilizadores",on:{click:function(e){return t.removerUtilizador(a._id)}}},[t._v("Remover")])],1)],1):t._e()],1)}))]],2),o("b-modal",{ref:"adicionarDesafio",attrs:{id:"adicionarDesafio",centered:"","header-bg-variant":"info","header-text-variant":"light","body-bg-variant":"light","footer-bg-variant":"light"},scopedSlots:t._u([{key:"modal-header",fn:function(a){var e=a.close;return[o("h4",{staticClass:"modalTitulo"},[t._v("Adicionar Desafios")]),o("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:e}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[o("b-button",{on:{click:function(a){return t.adicionarDesafio()}}},[t._v("Adicionar")])]},proxy:!0}])},[[o("form",{on:{submit:function(a){return a.preventDefault(),t.adicionarDesafio.apply(null,arguments)}}},[o("div",[o("b-form-group",{staticClass:"mb-3",attrs:{label:"Nome do desafio:","label-for":"nomeDesafio"}},[o("b-form-input",{attrs:{id:"nomeDesafio",type:"text",placeholder:"Nome do desafio",required:""},model:{value:t.formDesafios.nome,callback:function(a){t.$set(t.formDesafios,"nome",a)},expression:"formDesafios.nome"}})],1),o("b-form-group",{staticClass:"mb-3",attrs:{label:"Numero de etapas:","label-for":"numEtapas"}},[o("b-form-input",{attrs:{id:"numEtapas",type:"number",placeholder:"Numero de etapas",required:""},model:{value:t.formDesafios.nEtapas,callback:function(a){t.$set(t.formDesafios,"nEtapas",a)},expression:"formDesafios.nEtapas"}})],1),o("b-form-group",{staticClass:"mb-3",attrs:{label:"Anexo:","label-for":"anexoDesafio"}},[o("b-form-input",{attrs:{id:"anexoDesafio",type:"url",placeholder:"Anexo",required:""},model:{value:t.formDesafios.anexo,callback:function(a){t.$set(t.formDesafios,"anexo",a)},expression:"formDesafios.anexo"}})],1)],1)]),t.message?o("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(" "+t._s(t.message)+" ")]):t._e(),t.errors.length?o("p",[o("b",[t._v("Por favor corrija os seguintes erros:")]),o("ul",t._l(t.errors,(function(a,e){return o("li",{key:e},[t._v(t._s(a))])})),0)]):t._e()]],2)],1)},dt=[],mt={name:"PaginaPerfil",data(){return{form:{imagemNova:"",novaPalavraPasse:""},formDesafios:{nome:"",nEtapas:0,anexo:""},nomeUtilizador:"",loggedUtilizador:null,utilizadoresLista:null,desafiosLista:null,desafiosConcluidosLista:[],errors:[],message:""}},computed:{...(0,l.Se)(["getLoggedUser","getUtilizador","getUtilizadores","getDesafios","isDesafioAvailable","getFilmes"]),desafios(){let t=this.desafiosLista.filter((t=>t.nEtapas>this.loggedUtilizador.desafios.length)).slice(0).sort(this.ordenarDesfios);return t=t.slice(0,5),t},progressoDesafio(){return this.loggedUtilizador.desafios.length},badges(){let t=this.desafiosLista.filter((t=>t._id==this.loggedUtilizador.desafiosConcluidos)).slice(0).sort(this.ordenarDesfios);return t},utilizadores(){return this.utilizadoresLista.filter((t=>(t.nome.includes(this.nomeUtilizador)||""==this.nomeUtilizador)&&t.nome!=this.loggedUtilizador.nome)).slice(0)}},methods:{async getLoggedUserInfo(){try{let t=await this.getLoggedUser;await this.$store.dispatch("getUtilizador",t.id),this.loggedUtilizador=await this.getUtilizador}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async getAllUtilizadores(){try{await this.$store.dispatch("getAllUtilizadores"),this.utilizadoresLista=this.getUtilizadores}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async removerUtilizador(t){if(confirm("Tens acerteza que queres eliminar esta utilizador?"))try{await this.$store.dispatch("eliminarUtilizador",t),this.getAllUtilizadores()}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}},async getDesafiosLista(){try{await this.$store.dispatch("getAllDesafios"),this.desafiosLista=this.getDesafios}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async adicionarDesafio(){this.message="",this.errors=[];let t=!0;for(let e in this.formDesafio)if(0==this.formDesafio[e].length){t=!1;break}if(console.log(t),t)if(this.isDesafioAvailable(this.formDesafios.nome)){let t={nome:this.formDesafios.nome,nEtapas:this.formDesafios.nEtapas,anexo:this.formDesafios.anexo};try{await this.$store.dispatch("adicionarDesafio",t),this.getDesafiosLista()}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}}else this.errors.push("Já tem um desafio com esse nome!");else this.errors.push("Dados em falta ou invalidos, volta a confimar!")},async editarPerfil(){if(""!=this.form.novaPalavraPasse)try{this.loggedUtilizador.palavra_passe=this.form.novaPalavraPasse,await this.$store.dispatch("updateUtilizador",[this.loggedUtilizador._id,this.loggedUtilizador])}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}if(""!=this.form.imagemNova)try{this.loggedUtilizador.foto=this.form.imagemNova,await this.$store.dispatch("updateUtilizador",[this.loggedUtilizador._id,this.loggedUtilizador])}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}this.$refs["editarPerfilModal"].hide()},async mudarTipo(t){let a=this.utilizadoresLista.find((a=>a._id==t));a.tipo="admin"==a.tipo?"utilizador":"admin";try{await this.$store.dispatch("updateUtilizador",[t,a])}catch(e){this.message=e.response&&e.response.data||e.message||e.toString()}},async getListaFilmes(){try{await this.$store.dispatch("getAllFilmes")}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},ordenarDesfios(t,a){return t.nEtapas<a.nEtapas?-1:t.nEtapas>a.nEtapas?1:0},filmeImagem(t){return this.getFilmes.find((a=>a._id==t)).imagem},escolherFilme(t){this.$router.push({name:"filme",params:{filmeID:t}})}},mounted(){this.getLoggedUserInfo(),this.getDesafiosLista(),this.getAllUtilizadores(),this.getListaFilmes()}},ut=mt,gt=(0,g.Z)(ut,ct,dt,!1,null,"6bb463da",null),ft=gt.exports,ht=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},pt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"sobreNosDiv"}},[e("h1",[t._v("SOBRE NÓS")]),e("br"),e("h2",[t._v("Como surgiu a Lumière?")]),e("p",[t._v("No âmbito de Projeto II, unidade curricular da licenciatura de TSIW, foi proposto criar um site que te fosse trazer um ambiente para amantes do cinema. Assim, criamos a Lumière para que qualquer cinéfilo, como tu, poder conhecer novos filmes/séries, avaliar os mesmos e mostrar os teus conhecimentos nos jogos, enquanto ganhas medalhas e a possibilidadde de estar nos tops das tabelas de classificação.")]),e("br"),e("h2",[t._v("Porque Lumière?")]),e("p",[t._v("Em homenagem aos pais do cinema, Auguste e Louis Lumière, decidimos nomear o site pois estes marcam o inicio deste teu grande gosto.")]),e("br"),e("h2",[t._v("Mas, afinal, o que posso fazer aqui?")]),e("p",[t._v("Aqui podes encontrar novos filmes e séries, podes encontrar os teus filmes e séries favoritos e dizer o que achas aos outros utilizadores, ou então, joga e mostra os teus conhecimentos enquanto te divertes neste ambiente para amantes desta arte.")]),e("br"),e("p",{attrs:{id:"txtFinal"}},[t._v("Assim, esperamos que te divirtas neste espaço criado pensado em ti, pequeno cinéfilo, e que este ambiente te enalteça o que sentes pelo cinema. Diverte-te,")]),e("br"),e("p",{attrs:{id:"assinatura"}},[t._v("Paulo, Sofia")])])}],vt={},bt=vt,_t=(0,g.Z)(bt,ht,pt,!1,null,"65fbaf95",null),yt=_t.exports,St=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-container",{attrs:{fluid:""}},[e("h1",[t._v("Adicionar Novo Filme")]),e("form",{on:{submit:function(a){return a.preventDefault(),t.adicionarFilme.apply(null,arguments)}}},[e("div",[e("b-form-input",{attrs:{id:"nomeFilme",placeholder:"Nome do Filme/Serie"},model:{value:t.form.nome,callback:function(a){t.$set(t.form,"nome",a)},expression:"form.nome"}})],1),e("div",{attrs:{id:"imgFilme"}},[""==t.form.imagem?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ficheirosModalPoster",expression:"'ficheirosModalPoster'"}],staticClass:"imgFilme"},[t._v("Poster do Filme +")]):e("img",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ficheirosModalPoster",expression:"'ficheirosModalPoster'"}],staticClass:"imgFilme",attrs:{type:"image",src:t.form.imagem,alt:"poster do filme"}})],1),e("div",{attrs:{id:"trailer"}},[""==t.form.trailer?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ficheirosModalTrailer",expression:"'ficheirosModalTrailer'"}],staticClass:"trailer"},[t._v("Trailer do Filme +")]):e("div",{staticClass:"trailer"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ficheirosModalTrailer",expression:"'ficheirosModalTrailer'"}],attrs:{id:"trocarTrailer"}},[e("b-icon",{attrs:{icon:"arrow-left-right","aria-hidden":"true"}})],1),e("iframe",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ficheirosModalTrailer",expression:"'ficheirosModalTrailer'"}],attrs:{width:"560",height:"315",src:t.form.trailer,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})],1)],1),e("b-col",{attrs:{cols:"7"}},[e("div",{staticClass:"infoFilme"},[e("p",[e("span",[t._v("Sinopse: ")]),e("b-form-textarea",{attrs:{id:"textareaSinopse",placeholder:"Sinopse do Filme/Serie",rows:"5"},model:{value:t.form.sinopse,callback:function(a){t.$set(t.form,"sinopse",a)},expression:"form.sinopse"}})],1),e("b-row",[e("b-col",{attrs:{cols:"2"}},[e("p",[e("span",[t._v("Ano: ")])]),e("p",[e("span",[t._v("Realizador: ")])]),e("p",[e("span",[t._v("Produtora: ")])]),e("p",[e("span",[t._v("Elenco: ")])]),e("p",[e("span",[t._v("Género: ")])]),e("p",[e("span",[t._v("Tipo: ")])]),e("p",[e("span",[t._v("Classificações: ")])])]),e("b-col",{attrs:{cols:"10",id:"inputsInfFilme"}},[e("div",[e("b-form-input",{attrs:{id:"anoFilme",type:"number",min:"1895",placeholder:"Ano de lançamento"},model:{value:t.form.ano,callback:function(a){t.$set(t.form,"ano",a)},expression:"form.ano"}})],1),e("div",[e("b-form-input",{attrs:{id:"realizadorFilme",placeholder:"Realizador (ex:realizador1,realizador2,...)"},model:{value:t.form.realizador,callback:function(a){t.$set(t.form,"realizador",a)},expression:"form.realizador"}})],1),e("div",[e("b-form-input",{attrs:{id:"produtoraFilme",placeholder:"Produtora"},model:{value:t.form.produtora,callback:function(a){t.$set(t.form,"produtora",a)},expression:"form.produtora"}})],1),e("div",[e("b-form-input",{attrs:{id:"elencoFilme",placeholder:"Elenco (ex:ator1,ator2,...)"},model:{value:t.form.elenco,callback:function(a){t.$set(t.form,"elenco",a)},expression:"form.elenco"}})],1),e("div",[t._l(t.form.categorias,(function(a,o){return e("span",{key:o,staticClass:"categoriaFilme"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.categorias[o],expression:"form.categorias[index]"}],attrs:{name:"selCategoriaFilme",id:"selCategoriaFilme"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form.categorias,o,a.target.multiple?e:e[0])},t.novaCategoriaModal]}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Género Filme")]),t._l(t.categoriasOrdenadas,(function(a,o){return e("option",{key:o,domProps:{value:a.categoria}},[t._v(t._s(a.categoria))])})),e("option",{attrs:{value:"Outros"}},[t._v("Outros")])],2),t.form.categorias.length>1&&t.form.categorias.length==o+1?e("b-button",{staticClass:"menosCategoria",attrs:{variant:"outline"},on:{click:function(a){return t.form.categorias.pop()}}},[t._v("x")]):t._e()],1)})),t.form.categorias.length<3?e("b-button",{attrs:{id:"addCategoriaId"},on:{click:t.addCategoria}},[t._v("+")]):t._e()],2),e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.tipo,expression:"form.tipo"}],attrs:{name:"selTipoFilme",id:"selTipoFilme"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"tipo",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Tipo Filme")]),e("option",{attrs:{value:"Filme"}},[t._v("Filme")]),e("option",{attrs:{value:"Serie"}},[t._v("Serie")])])]),e("div",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.classificacao,expression:"form.classificacao"}],attrs:{name:"selClassificacaoFilme",id:"selClassificacaoFilme"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"classificacao",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Classificação do Filme")]),e("option",{attrs:{value:"M/3"}},[t._v("M/3")]),e("option",{attrs:{value:"M/6"}},[t._v("M/6")]),e("option",{attrs:{value:"M/12"}},[t._v("M/12")]),e("option",{attrs:{value:"M/14"}},[t._v("M/14")]),e("option",{attrs:{value:"M/16"}},[t._v("M/16")]),e("option",{attrs:{value:"M/18"}},[t._v("M/18")])])])])],1)],1)]),e("input",{attrs:{id:"btnAdicionarFilme",type:"submit",value:"Adicionar Filme"}})],1),e("b-modal",{ref:"novaCategoriaModal",attrs:{id:"novaCategoriaModal",size:"sm","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("h4",{staticClass:"modalTitulo"},[t._v("Nova Categoria")]),e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])]}},{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:t.NovaCategoria}},[t._v("Guardar")])]},proxy:!0}])},[[e("label",{attrs:{for:"novaCategoria"}},[t._v("Nova Categoria")]),e("b-form-input",{attrs:{id:"novaCategoria",type:"text"},model:{value:t.novaCategoria,callback:function(a){t.novaCategoria=a},expression:"novaCategoria"}}),e("br"),t.message?e("div",{staticClass:"alert",class:t.successful?"alert-success":"alert-danger"},[t._v(" "+t._s(t.message)+" ")]):t._e(),t.erros.length?e("p",[e("ul",t._l(t.erros,(function(a,o){return e("li",{key:o},[t._v(t._s(a))])})),0)]):t._e()]],2),e("b-modal",{attrs:{id:"ficheirosModalPoster","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("b-col",{staticClass:"modalTitulo",attrs:{cols:"11"}},[e("h4",[t._v("Poster do Filme")])]),e("b-col",{staticStyle:{"text-align":"right"}},[e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])],1)]}},{key:"modal-footer",fn:function(a){var o=a.close;return[e("b-button",{attrs:{variant:"primary"},on:{click:o}},[t._v("Guardar")])]}}])},[[e("label",{attrs:{for:"urlImagemFilme"}},[t._v("URL da imagem")]),e("b-form-input",{staticClass:"mb-2",attrs:{id:"urlImagemFilme",type:"url"},model:{value:t.form.imagem,callback:function(a){t.$set(t.form,"imagem",a)},expression:"form.imagem"}})]],2),e("b-modal",{ref:"ficheirosModalTrailer",attrs:{id:"ficheirosModalTrailer","header-bg-variant":"info","body-bg-variant":"light","footer-bg-variant":"light","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(a){var o=a.close;return[e("b-col",{staticClass:"modalTitulo",attrs:{cols:"11"}},[e("h4",[t._v("Poster do Filme")])]),e("b-col",{staticStyle:{"text-align":"right"}},[e("b-button",{staticClass:"fecharModal",attrs:{variant:"info"},on:{click:o}},[t._v("x")])],1)]}},{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:t.trailerFilme}},[t._v("Guardar")])]},proxy:!0}])},[[e("label",{attrs:{for:"urlTrailerFilme"}},[t._v("URL do trailer")]),e("b-form-input",{attrs:{id:"urlTrailerFilme",type:"url",placeholder:"Link do Youtube"},model:{value:t.trailerURL,callback:function(a){t.trailerURL=a},expression:"trailerURL"}})]],2)],1)],1)},Et=[],wt={name:"AdicionarFilme",data(){return{form:{nome:"",ano:1895,realizador:"",produtora:"",elenco:"",categorias:[""],tipo:"",imagem:"",trailer:"",sinopse:"",classificacao:""},trailerURL:"",novaCategoria:"",categorias:null,message:null,erros:[]}},computed:{...(0,l.Se)(["getCategoria","isNomeFilmeAvalido","isCategoriaAvailable","getFilme","getMessage","getFilmes"]),categoriasOrdenadas(){return null!==this.categorias?this.categorias.slice(0).sort(this.ordenarAlfabeticaCategoria):""}},methods:{async adicionarFilme(){this.message="";let t=!0;for(let e in this.form)if(0===this.form[e].length){t=!1;break}for(let e of this.form.categorias)if(0===e.length||"Outros"==e){t=!1;break}if(t)if(this.isNomeFilmeAvalido(this.form.nome)){let t=this.form.realizador.split(","),e=this.form.elenco.split(","),o=this.form.trailer.replace("watch?v=","embed/"),i={nome:this.form.nome,imagem:this.form.imagem,trailer:o,tipo:this.form.tipo,categoria:this.form.categorias,ano:this.form.ano,realizador:t,produtora:this.form.produtora,elenco:e,sinopse:this.form.sinopse,classificacao:this.form.classificacao,avaliacao:0,nAvaliacoes:0,comentarios:[]};try{await this.$store.dispatch("novoFilme",i),this.$router.push({name:"filme",params:{filmeID:this.getFilme}})}catch(a){this.message=a.response&&a.response.data||a.message||a.toString()}}else alert("Já existe um filme com esse nome");else alert("Dados em falta ou invalidos, volta a confimar!")},async getListaCategorias(){try{await this.$store.dispatch("getAllCategorias"),this.categorias=this.getCategoria}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}},async NovaCategoria(){if(0!=this.novaCategoria.length)if(this.message="",this.erros=[],this.isCategoriaAvailable(this.novaCategoria))try{await this.$store.dispatch("adicionarCategoria",this.novaCategoria),this.getListaCategorias(),this.$refs["novaCategoriaModal"].hide()}catch(t){this.message=t.response&&t.response.data||t.message||t.toString()}else this.erros.push("Já existe essa categoria na nossa base de dados")},ordenarAlfabeticaCategoria(t,a){return t.categoria<a.categoria?-1:t.categoria>a.categoria?1:0},addCategoria(){this.form.categorias.push("")},novaCategoriaModal(){this.form.categorias.find((t=>"Outros"==t))&&this.$refs["novaCategoriaModal"].show()},trailerFilme(){this.form.trailer=this.trailerURL.replace("watch?v=","embed/"),this.$refs["ficheirosModalTrailer"].hide()}},mounted(){this.getListaCategorias()}},Ct=wt,zt=(0,g.Z)(Ct,St,Et,!1,null,"03b2e59e",null),kt=zt.exports;const At="https://lumiere2122.herokuapp.com/lumiere";var Tt=At;function Ut(){let t=JSON.parse(localStorage.getItem("utilizador"));return t&&t.accessToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.accessToken}:{"Content-Type":"application/json"}}const Ft={async getPublicContent(){const t=await fetch(`${Tt}`,{method:"GET"});if(t.ok){let a=await t.json();return a}throw Error(xt(t.status))},async fetchOneUtilizadorByID(t){const a=await fetch(`${Tt}/utilizadores/${t}`,{method:"GET",headers:Ut()});if(a.ok){let t=await a.json();return t}throw Error(xt(a.status))},async fetchAllUtilizadores(){const t=await fetch(`${Tt}/utilizadores`,{method:"GET",headers:Ut()});if(t.ok){let a=await t.json();return a.utilizador}throw Error(xt(t.status))},async eliminarUtilizador(t){const a=await fetch(`${Tt}/utilizadores/${t}`,{method:"DELETE",headers:Ut()});if(a.ok){const t=await a.json();return t}throw Error(xt(a.status))},async updateUtilizador(t,a){const e=await fetch(`${Tt}/utilizadores/${t}`,{method:"PATCH",headers:Ut(),body:JSON.stringify({foto:a.foto,palavra_passe:a.palavra_passe,tipo:a.tipo})});if(e.ok){const t=await e.json();return t}throw Error(xt(e.status))},async addFavoritos(t,a){const e=await fetch(`${Tt}/utilizadores/${t}/favoritos/${a}`,{method:"POST",headers:Ut()});if(e.ok){const t=await e.json();return t}throw Error(xt(e.status))},async addLista(t,a){const e=await fetch(`${Tt}/utilizadores/${t}/lista/${a}`,{method:"POST",headers:Ut()});if(e.ok){const t=await e.json();return t}throw Error(xt(e.status))},async addDesafio(t,a){const e=await fetch(`${Tt}/utilizadores/${t}/desafio/${a}`,{method:"POST",headers:Ut()});if(e.ok){const t=await e.json();return t}throw Error(xt(e.status))},async addDesafioConcluido(t,a){const e=await fetch(`${Tt}/utilizadores/${t}/desafioConcluido/${a}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();return t}throw Error(xt(e.status))}};function xt(t){let a="";switch(t){case 401:a="Não é permitido executar esta ação!";break;case 403:a="Acesso proibido";break;default:a="Mensagem desconhecida";break}return a}const Mt={async login(t){const a=await fetch(`${Tt}/utilizadores/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({utilizador:t.nome,palavra_passe:t.palavra_passe})});if(a.ok){const t=await a.json();return t.accessToken&&localStorage.setItem("utilizador",JSON.stringify(t)),t}throw Error($t(a.status))},async logout(){localStorage.removeItem("utilizador")},async register(t){const a=await fetch(`${Tt}/utilizadores`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nome:t.nome,palavra_passe:t.palavra_passe,data_nascimento:t.data_nascimento})});if(a.ok){const t=await a.json();return t}throw Error($t(a.status))}};function $t(t){let a="";switch(t){case 400:a="O nome de utilizador já existe.";break;case 401:a="Credenciais erradas";break;case 404:a="Utilizador não encontrado";break;case 500:a="Erro do Servidor Interno";break;default:a="Mensagem desconhecida";break}return a}function Ot(){let t=JSON.parse(localStorage.getItem("utilizador"));return t&&t.accessToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.accessToken}:{"Content-Type":"application/json"}}const jt={async fetchOneFilmeByID(t){const a=await fetch(`${Tt}/filmes/${t}`,{method:"GET"});if(a.ok){let t=await a.json();return t}throw Error(Nt(a.status))},async fetchAllFilmes(){const t=await fetch(`${Tt}/filmes`,{method:"GET"});if(t.ok){let a=await t.json();return a.filme}throw Error(Nt(t.status))},async adicionarFilme(t){const a=await fetch(`${Tt}/filmes`,{method:"POST",headers:Ot(),body:JSON.stringify({nome:t.nome,imagem:t.imagem,trailer:t.trailer,tipo:t.tipo,categoria:t.categoria,ano:t.ano,realizador:t.realizador,produtora:t.produtora,elenco:t.elenco,sinopse:t.sinopse,classificacao:t.classificacao})});if(a.ok){const t=await a.json();return t}throw Error(Nt(a.status))},async eliminarFilme(t){const a=await fetch(`${Tt}/filmes/${t}`,{method:"DELETE",headers:Ot()});if(a.ok){const t=await a.json();return t}throw Error(Nt(a.status))},async addComentario(t,a){const e=await fetch(`${Tt}/filmes/${t}/comentarios`,{method:"POST",headers:Ot(),body:JSON.stringify({utilizadorID:a.utilizador,comentario:a.comentario})});if(e.ok){const t=await e.json();return t}throw Error(Nt(e.status))},async updateComentario(t,a,e){const o=await fetch(`${Tt}/filmes/${t}/comentarios/${a}`,{method:"PATCH",headers:Ot(),body:JSON.stringify({spoiler:e})});if(o.ok){const t=await o.json();return t}throw Error(Nt(o.status))},async updateAvaliacao(t,a){const e=await fetch(`${Tt}/filmes/${t}/avaliacao`,{method:"PATCH",headers:Ot(),body:JSON.stringify({avaliacao:a})});if(e.ok){const t=await e.json();return t}throw Error(Nt(e.status))}};function Nt(t){let a="";switch(t){case 401:a="Não é permitido executar esta ação!";break;case 403:a="Acesso proibido";break;case 404:a="Objeto não encontrado";break;default:a="Mensagem desconhecida";break}return a}function It(){let t=JSON.parse(localStorage.getItem("utilizador"));return t&&t.accessToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.accessToken}:{"Content-Type":"application/json"}}const Lt={async fetchOneJogosByID(t){const a=await fetch(`${Tt}/jogos/${t}`,{method:"GET",headers:It()});if(a.ok){let t=await a.json();return t}throw Error(Jt(a.status))},async fetchAllJogos(){const t=await fetch(`${Tt}/jogos`,{method:"GET",headers:It()});if(t.ok){let a=await t.json();return a.jogo}throw Error(Jt(t.status))},async adicionarJogo(t){const a=await fetch(`${Tt}/jogos`,{method:"POST",headers:It(),body:JSON.stringify({nome:t.nome,img:t.img,tipo:t.tipo,perguntas:t.perguntas})});if(a.ok){const t=await a.json();return t}throw Error(Jt(a.status))},async eliminarJogo(t){const a=await fetch(`${Tt}/jogos/${t}`,{method:"DELETE",headers:It()});if(a.ok){const t=await a.json();return t}throw Error(Jt(a.status))},async fetchAllClassificacoes(t){const a=await fetch(`${Tt}/jogos/${t}/classificacao`,{method:"GET",headers:It()});if(a.ok){let t=await a.json();return t.jogo}throw Error(Jt(a.status))},async addClassificacao(t,a){const e=await fetch(`${Tt}/jogos/${t}/classificacao`,{method:"POST",headers:It(),body:JSON.stringify({utilizadorID:a.utilizadorID,pontuacao:a.pontuacao})});if(e.ok){const t=await e.json();return t}throw Error(Jt(e.status))}};function Jt(t){let a="";switch(t){case 401:a="Não é permitido executar esta ação!";break;case 403:a="Acesso proibido";break;case 404:a="Objeto não encontrado";break;default:a="Mensagem desconhecida";break}return a}function Dt(){let t=JSON.parse(localStorage.getItem("utilizador"));return t&&t.accessToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.accessToken}:{"Content-Type":"application/json"}}const Pt={async fetchAllCategorias(){const t=await fetch(`${Tt}/categorias`,{method:"GET"});if(t.ok){let a=await t.json();return a.categoria}throw Error(Gt(t.status))},async adicionarCategoria(t){const a=await fetch(`${Tt}/categorias`,{method:"POST",headers:Dt(),body:JSON.stringify({categoria:t})});if(a.ok){const t=await a.json();return t}throw Error(Gt(a.status))}};function Gt(t){let a="";switch(t){case 401:a="Não é permitido executar esta ação!";break;case 403:a="Acesso proibido";break;default:a="Mensagem desconhecida";break}return a}function qt(){let t=JSON.parse(localStorage.getItem("utilizador"));return t&&t.accessToken?{"Content-Type":"application/json",Authorization:"Bearer "+t.accessToken}:{"Content-Type":"application/json"}}const Rt={async fetchOneDesafioByID(t){const a=await fetch(`${Tt}/desafios/${t}`,{method:"GET"});if(a.ok){let t=await a.json();return t}throw Error(Bt(a.status))},async fetchAllDesafios(){const t=await fetch(`${Tt}/desafios`,{method:"GET",headers:qt()});if(t.ok){let a=await t.json();return a.desafio}throw Error(Bt(t.status))},async adicionarDesafio(t){const a=await fetch(`${Tt}/desafios`,{method:"POST",headers:qt(),body:JSON.stringify({nome:t.nome,nEtapas:t.nEtapas,imagem:t.anexo})});if(a.ok){const t=await a.json();return t}throw Error(Bt(a.status))}};function Bt(t){let a="";switch(t){case 401:a="Não é permitido executar esta ação!";break;case 403:a="Acesso proibido";break;default:a="Mensagem desconhecida";break}return a}o["default"].use(l.ZP);var Vt=new l.ZP.Store({state:{message:"",utilizadores:[],utilizador:null,loggedIn:!!localStorage.utilizador,loggedUser:localStorage.utilizador?JSON.parse(localStorage.utilizador):null,jogos:[],jogo:null,tipoJogo:["Quizz","Preencher","Lista"],filmes:[],filme:null,categorias:[],desafios:[]},getters:{getMessage:t=>t.message,isUser:t=>(a,e)=>t.utilizadores.some((t=>t.nome===a&&t.palavra_passe===e)),isUsernameAvailable:t=>a=>t.utilizadores.every((t=>t.nome!==a)),getUtilizadores:t=>t.utilizadores,getUtilizador:t=>t.utilizador,getLoggedIn:t=>t.loggedIn,getLoggedUser:t=>t.loggedUser,getJogos:t=>t.jogos,getJogo:t=>t.jogo,isNomeJogoAvalido:t=>a=>t.jogos.every((t=>t.nome!==a)),getTipoJogo:t=>t.tipoJogo,getFilmes:t=>t.filmes,getFilme:t=>t.filme,isNomeFilmeAvalido:t=>a=>t.filmes.every((t=>t.nome!==a)),getCategoria:t=>t.categorias,isCategoriaAvailable:t=>a=>t.categorias.every((t=>t.categoria!==a)),isFilmeFavoritoValido:t=>a=>t.utilizador.favoritos.every((t=>t.nome!==a)),isFilmeListaValido:t=>a=>t.utilizador.lista.every((t=>t.nome!==a)),getDesafios:t=>t.desafios,isDesafioAvailable:t=>a=>t.desafios.every((t=>t.nome!==a))},mutations:{SET_MESSAGE(t,a){t.message=a},SET_LOGGED_USER(t,a){t.loggedIn=!0,t.loggedUser=a},loginFailure(t){t.loggedIn=!1,t.loggedUser=null},SET_LOGOUT(t){t.utilizadores.map((a=>{a.nome==t.loggedUser.nome&&(a=t.loggedUser)})),t.loggedIn=!1,t.loggedUser=null},SET_UTILIZADORES(t,a){t.utilizadores=a},SET_UTILIZADOR(t,a){t.utilizador=a.utilizador},SET_JOGOS(t,a){t.jogos=a},SET_JOGO(t,a){t.jogo=a},SET_FILMES(t,a){t.filmes=a},SET_FILME(t,a){t.filme=a},SET_CATEGORIAS(t,a){t.categorias=a},SET_DESAFIOS(t,a){t.desafios=a}},actions:{async getAPIRoot({commit:t}){const a=await Ft.getPublicContent();t("SET_MESSAGE",a.message)},async register({commit:t},a){try{const e=await Mt.register(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async login({commit:t},a){try{const e=await Mt.login(a);t("SET_LOGGED_USER",e)}catch(e){throw t("loginFailure"),e}},async getAllUtilizadores({commit:t}){try{const a=await Ft.fetchAllUtilizadores();t("SET_UTILIZADORES",a)}catch(a){throw t("SET_UTILIZADORES",[]),t("SET_MESSAGE",a),a}},async getUtilizador({commit:t},a){try{const e=await Ft.fetchOneUtilizadorByID(a);t("SET_UTILIZADOR",e)}catch(e){throw t("SET_UTILIZADOR",null),t("SET_MESSAGE",e),e}},logout({commit:t}){Mt.logout(),t("SET_LOGOUT")},async eliminarUtilizador({commit:t},a){try{const e=await Ft.eliminarUtilizador(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async updateUtilizador({commit:t},a){try{const e=await Ft.updateUtilizador(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async addFavoritos({commit:t},a){try{const e=await Ft.addFavoritos(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async addLista({commit:t},a){try{const e=await Ft.addLista(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async addDesafio({commit:t},a){try{const e=await Ft.addDesafio(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async addDesafioConcluido({commit:t},a){let e,o=!1;if(a[1].map((t=>{t.nEtapas==a[0].desafios.length+1&&(o=!0,e=t)})),o)try{console.log(a[0]._id),console.log(e._id);const o=await Ft.addDesafioConcluido(a[0]._id,e._id);t("SET_MESSAGE",o.msg)}catch(i){throw t("SET_MESSAGE",""),i}},async getAllFilmes({commit:t}){try{const a=await jt.fetchAllFilmes();t("SET_FILMES",a)}catch(a){throw t("SET_FILMES",[]),t("SET_MESSAGE",a),a}},async getFilme({commit:t},a){try{const e=await jt.fetchOneFilmeByID(a);t("SET_FILME",e)}catch(e){throw t("SET_FILME",null),t("SET_MESSAGE",e),e}},async novoFilme({commit:t},a){try{const e=await jt.adicionarFilme(a);t("SET_MESSAGE",e.msg),t("SET_FILME",e.id)}catch(e){throw t("SET_MESSAGE",""),e}},async eliminarFilme({commit:t},a){try{const e=await jt.eliminarFilme(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async addComentario({commit:t},a){try{const e=await jt.addComentario(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async updateComentario({commit:t},a){try{const e=await jt.updateComentario(a[0],a[1],a[2]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async updateAvaliacao({commit:t},a){try{const e=await jt.updateAvaliacao(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async getAllCategorias({commit:t}){try{const a=await Pt.fetchAllCategorias();t("SET_CATEGORIAS",a)}catch(a){throw t("SET_CATEGORIAS",[]),t("SET_MESSAGE",a),a}},async adicionarCategoria({commit:t},a){try{const e=await Pt.adicionarCategoria(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async getAllJogos({commit:t}){try{const a=await Lt.fetchAllJogos();t("SET_JOGOS",a)}catch(a){throw t("SET_JOGOS",[]),t("SET_MESSAGE",a),a}},async getJogo({commit:t},a){try{const e=await Lt.fetchOneJogosByID(a);t("SET_JOGO",e)}catch(e){throw t("SET_JOGO",null),t("SET_MESSAGE",e),e}},async novoJogo({commit:t},a){try{const e=await Lt.adicionarJogo(a);t("SET_MESSAGE",e.msg),t("SET_JOGO",e.id)}catch(e){throw t("SET_MESSAGE",""),e}},async eliminarJogo({commit:t},a){try{const e=await Lt.eliminarJogo(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async getClassificacao({commit:t},a){try{const e=await Lt.fetchAllClassificacoes(a);t("SET_JOGO",e)}catch(e){throw t("SET_JOGO",null),t("SET_MESSAGE",e),e}},async addClassificacao({commit:t},a){try{const e=await Lt.addClassificacao(a[0],a[1]);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}},async getAllDesafios({commit:t}){try{const a=await Rt.fetchAllDesafios();t("SET_DESAFIOS",a)}catch(a){throw t("SET_DESAFIOS",[]),t("SET_MESSAGE",a),a}},async getDesafio({commit:t},a){try{const e=await Rt.fetchOneDesafioByID(a);t("SET_DESAFIOS",e)}catch(e){throw t("SET_DESAFIOS",null),t("SET_MESSAGE",e),e}},async adicionarDesafio({commit:t},a){try{const e=await Rt.adicionarDesafio(a);t("SET_MESSAGE",e.msg)}catch(e){throw t("SET_MESSAGE",""),e}}}});o["default"].use(k.Z);const Zt=[{path:"/",name:"paginaInicial",component:M},{path:"/filmes",name:"filmes",component:L},{path:"/filmes/:filmeInfo",name:"filme",component:R},{path:"/jogos",name:"jogos",component:H,meta:{requerAutenticacao:!0}},{path:"/jogos/:jogo",name:"jogo",component:et,meta:{requerAutenticacao:!0}},{path:"/jogos/:classificacao",name:"classificacao",component:lt},{path:"/perfil",name:"perfil",component:ft,meta:{requerAutenticacao:!0}},{path:"/sobreNos",name:"sobreNos",component:yt},{path:"/adicionarFilme",name:"adicionarFilme",component:kt,meta:{requerAutenticacao:!0}},{path:"*",name:"Error",component:Error}],Qt=new k.Z({mode:"history",base:"/Lumiere/",routes:Zt});Qt.beforeEach(((t,a,e)=>{t.meta.requerAutenticacao&&!Vt.getters.getLoggedUser?alert("É preciso autenticar primeiro!"):e()}));var Yt=Qt,Ht=e(5069),Xt=e(3017);e(44);o["default"].use(Ht.XG7),o["default"].use(Xt.A7),o["default"].config.productionTip=!1,new o["default"]({router:Yt,store:Vt,render:t=>t(z)}).$mount("#app")},9136:function(t,a,e){t.exports=e.p+"img/catalogoImg.94588ad9.svg"},7940:function(t,a,e){t.exports=e.p+"img/jogosImg.e11a5b9a.svg"},5218:function(t,a,e){t.exports=e.p+"img/sobreNosImg.de08af1e.svg"},829:function(t,a,e){t.exports=e.p+"img/vetor.8fea9ebe.svg"}},a={};function e(o){var i=a[o];if(void 0!==i)return i.exports;var s=a[o]={exports:{}};return t[o](s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(a,o,i,s){if(!o){var r=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],s=t[d][2];for(var n=!0,l=0;l<o.length;l++)(!1&s||r>=s)&&Object.keys(e.O).every((function(t){return e.O[t](o[l])}))?o.splice(l--,1):(n=!1,s<r&&(r=s));if(n){t.splice(d--,1);var c=i();void 0!==c&&(a=c)}}return a}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[o,i,s]}}(),function(){e.d=function(t,a){for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p="/Lumiere/"}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,o){var i,s,r=o[0],n=o[1],l=o[2],c=0;if(r.some((function(a){return 0!==t[a]}))){for(i in n)e.o(n,i)&&(e.m[i]=n[i]);if(l)var d=l(e)}for(a&&a(o);c<r.length;c++)s=r[c],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(d)},o=self["webpackChunklumiere"]=self["webpackChunklumiere"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(1e3)}));o=e.O(o)})();
//# sourceMappingURL=app.e313dc74.js.map